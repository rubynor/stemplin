<div class="w-full p-4 flex flex-col gap-y-8 lg:gap-y-16">
  <div class="flex flex-col">
    <div class="border-b border-gray-100 pb-4 mb-4">
      <span class="text-sm font-medium text-gray-500 uppercase">Summary</span>
    </div>
    <div class="flex-1 flex gap-x-16 mb-4">
      <div class="flex flex-row items-start gap-x-2">
        <i class="uc-icon text-2xl text-gray-400">&#xea95;</i>
        <div>
          <h2 class="text-base font-regular">Total billable hours</h2>
          <span class="font-semibold text-2xl text-primary">
            <%= minutes_to_float detailed_report_data.total_billable_minutes %>
          </span>
        </div>
      </div>
      <div class="flex flex-row items-start gap-x-2">
        <i class="uc-icon text-2xl text-gray-400">&#xeb5b;</i>
        <div>
          <h2 class="text-base font-regular">Total hours</h2>
          <span class="font-semibold text-2xl text-primary">
            <%= minutes_to_float detailed_report_data.total_minutes %>
          </span>
        </div>
      </div>
    </div>
  </div>

  <div class="flex flex-col">
    <div class="border-b border-gray-100 pb-4 mb-4">
      <span class="text-sm font-medium text-gray-500 uppercase">Time registrations</span>
    </div>
    <table class="w-full">
      <thead>
      <tr class="bg-gray-50 border-y-2 border-gray-100 text-gray-500 print-color-adjust uppercase font-medium text-base">
        <td class="pl-5 py-4">Client (<%= detailed_report_data.clients.count %>)</td>
        <td>Project (<%= detailed_report_data.projects.count %>)</td>
        <td>Task (<%= detailed_report_data.tasks.count %>)</td>
        <td>Person (<%= detailed_report_data.users.count %>)</td>
        <td class="w-[6rem] text-end">Hours</td>
        <td class="w-6"></td>
      </tr>
      </thead>
      <tbody>
        <% structured_report_data.each do |key, value| %>
          <tr class="bg-gray-50 border-b-1 border-gray-100 text-gray-600 print-color-adjust">
            <td class="pl-5 py-4 font-semibold col-span-4"><%= key.strftime("%A, %d %B %Y") %></td>
            <td></td>
            <td></td>
            <td></td>
            <td class="text-end"><%= minutes_to_float value.sum { |v| v.minutes } %></td>
            <td></td>
          </tr>
          <% value.each do |child| %>
            <tr class="">
              <td class="pl-5 py-4"><%= child.project.client.name %></td>
              <td>
                <%= child.project.name %>
              </td>
              <td>
                <div class="flex flex-col gap-3">
                  <span><%= child.task.name %></span>
                </div>
              </td>
              <td><%= child.user.name %></td>
              <td class="text-end"><%= minutes_to_float child.minutes %></td>
              <td></td>
            </tr>
            <tr class="border-b last:border-b-0 border-gray-100">
              <td></td>
              <td></td>
              <td class="py-3"><span class="text-gray-500 text-sm"><%= child.notes %></span></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
          <% end %>
        <% end %>
      </tbody>
      <tfoot class="border-t border-gray-100">
        <tr class="py-4">
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td class="text-end">
            <span class="font-medium text-xl">Total</span>
            <span class="font-semibold text-2xl text-primary"><%= minutes_to_float detailed_report_data.total_minutes %></span>
          </td>
          <td></td>
        </tr>
      </tfoot>
    </table>
  </div>
</div>
